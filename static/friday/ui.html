<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Friday â€“ Browser Chat</title>
  <link rel="stylesheet" href="/static/site.css">
</head>
<body class="page">
  <nav class="nav">
    <a class="brand" href="/">ðŸš€ Friday</a>
    <div class="spacer"></div>
    <a href="/docs">Docs</a>
    <a class="active" href="/ui">UI</a>
  </nav>

  <main class="card">
    <h2>Friday â€“ Browser Chat</h2>

    <div class="grid">
      <label>API Token</label>
      <div class="row">
        <input id="tok" type="password" placeholder="paste tokenâ€¦" />
        <button id="save">Save</button>
      </div>

      <label>Message</label>
      <textarea id="msg" rows="5" placeholder="Say helloâ€¦"></textarea>

      <div class="row">
        <button id="send">Send</button>
        <button id="clear" class="ghost">Clear</button>
      </div>

      <label>Reply</label>
      <pre id="out" class="mono">{ }</pre>
    </div>
  </main>

  <script>
    const tok  = document.getElementById('tok');
    const save = document.getElementById('save');
    const msg  = document.getElementById('msg');
    const send = document.getElementById('send');
    const out  = document.getElementById('out');
    const clr  = document.getElementById('clear');

    tok.value = localStorage.getItem('FRIDAY_TOKEN') || '';

    save.onclick = () => {
      localStorage.setItem('FRIDAY_TOKEN', tok.value.trim());
      alert('Saved to localStorage (dev only).');
    };

    send.onclick = async () => {
      const t = (localStorage.getItem('FRIDAY_TOKEN') || '').trim();
      if (!t) { alert('Save API token first'); return; }

      const r = await fetch('/chat', {
        method:'POST',
        headers:{
          'Authorization': 'Bearer ' + t,
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ message: msg.value })
      });
      out.textContent = await r.text();
    };

    clr.onclick = () => { msg.value=''; out.textContent='{ }'; };
  </script>
</body>
</html>

